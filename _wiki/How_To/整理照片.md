---
category: How_To
published: true
---

## Workflow:

<div class="mermaid">
    graph TD
    T1[Workflow 1: 管理照片] -.-> E

    E[用iPhone拍摄照片]
    E --> G[用数据线将照片通过PC导入移动硬盘]
    G --> A[用ExFAT格式的移动硬盘存储照片]
    A --> H[用Exiftool编辑照片EXIF信息]
    H --> C[用Photo2Move app将照片按目录归档]
    C --> B[通过Windows 10 Photos]
    B --> D[在PC上浏览照片]

    T2[Workflow 2: 备份硬盘] -.-> I

    I[定期备份硬盘到OneDrive]

</div>

## Script

```bash
# 0. Enter photos folder
cd /mnt/d/Downloads/DCIM

# 1. Rename & reorganize photos by date
# Ref: https://linux.die.net/man/1/exiftool
exiftool '-filename<CreateDate' -d /mnt/d/Downloads/Photos/OrganizedPhotos/%Y/%Y_%m/%Y_%m_%d/%Y-%m-%d_%H%M%S%%-c.%%le -r .

# 2. Remove all AAE files
# Ref: https://superuser.com/questions/112078/delete-matching-files-in-all-subdirectories
find . -name \*.AAE -type f -delete

# 3. Move all no-exif photos
# Ref: https://unix.stackexchange.com/questions/52814/flattening-a-nested-directory
find . -mindepth 2 -type f -exec mv -t /mnt/d/Downloads/Photos/PhotosWithoutEXIFDates -n '{}' +

# 4. Check if duplicate photos exist
# Ref: https://serverfault.com/questions/267255/mv-rename-if-exists
find . -mindepth 2 -type f -exec mv -t . -n '{}' +
```
